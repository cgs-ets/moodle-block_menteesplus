{"version":3,"sources":["../src/menteesplus.js"],"names":["define","$","Ajax","Notification","toggleClickHandler","click","toggle","userid","e","preventDefault","attr","value","call","methodname","args","preferences","then","data","saved","catch","exception","init","clickNode","toggleNode","keepExpanded"],"mappings":"AAqBAA,OAAM,iCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CAA+C,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgC,CACjF,aAMA,QAASC,CAAAA,CAAT,CAA4BC,CAA5B,CAAmCC,CAAnC,CAA2CC,CAA3C,CAAmD,CAC/CF,CAAK,CAACA,KAAN,CAAY,SAASG,CAAT,CAAY,CAEpBA,CAAC,CAACC,cAAF,GAGA,GAAoC,CAAhC,EAAAH,CAAM,CAACI,IAAP,CAAY,eAAZ,CAAJ,CAAuC,CACnCJ,CAAM,CAACI,IAAP,CAAY,eAAZ,CAA6B,GAA7B,CACH,CAFD,IAEO,IAAoC,CAAhC,EAAAJ,CAAM,CAACI,IAAP,CAAY,eAAZ,CAAJ,CAAuC,CAC1CJ,CAAM,CAACI,IAAP,CAAY,eAAZ,CAA6B,GAA7B,CACH,CATmB,GAYhBC,CAAAA,CAAK,CAAmC,GAAhC,EAAAL,CAAM,CAACI,IAAP,CAAY,eAAZ,EAAsC,CAAtC,CAA0C,CAZlC,CAwBpBR,CAAI,CAACU,IAAL,CAAU,CANI,CACVC,UAAU,CAAE,gCADF,CAEVC,IAAI,CAAE,CACFC,WAAW,CARD,CAAC,CACf,KAAQ,6BADO,CAEf,MAASJ,CAFM,CAGf,OAAUJ,CAHK,CAAD,CAOR,CAFI,CAMJ,CAAV,EAAqB,CAArB,EAAwBS,IAAxB,CAA6B,SAASC,CAAT,CAAe,CACxC,GAAIA,CAAI,CAACC,KAAT,CAAgB,CAEf,CAEJ,CALD,EAKGC,KALH,CAKShB,CAAY,CAACiB,SALtB,CAOH,CA/BD,CAgCH,CAED,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAoBC,CAApB,CAAgChB,CAAhC,CAAwCiB,CAAxC,CAAsD,IAGpDnB,CAAAA,CAAK,CAAGJ,CAAC,CAAC,IAAMqB,CAAP,CAH2C,CAMpDhB,CAAM,CAAGL,CAAC,CAAC,IAAMsB,CAAP,CAN0C,CASxDnB,CAAkB,CAACC,CAAD,CAAQC,CAAR,CAAgBC,CAAhB,CAAlB,CAGA,GAAI,CAACiB,CAAL,CAAmB,CACflB,CAAM,CAACI,IAAP,CAAY,eAAZ,CAA6B,GAA7B,CACH,CACJ,CAhBE,CAkBV,CA5DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package    block_menteesplus\n * @copyright  2019 Michael de Raadt michaelderaadt@gmai.com\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification'], function($, Ajax, Notification) {\n    \"use strict\";\n\n    /**\n     * Click handler to toggle the given nav node.\n     * @param {Object} node The nav node which should be toggled.\n     */\n    function toggleClickHandler(click, toggle, userid) {\n        click.click(function(e) {\n            // Prevent that the browser opens the node's default action link (if existing).\n            e.preventDefault();\n\n            // Toggle expanded/collapsed.\n            if (toggle.attr('data-collapse') == 0) {\n                toggle.attr(\"data-collapse\", \"1\");\n            } else if (toggle.attr('data-collapse') == 1) {\n                toggle.attr(\"data-collapse\", \"0\");\n            }\n\n            // Save toggle state as a preference.\n            var value = toggle.attr('data-collapse') == '1' ? 1 : 0;\n            var preferences = [{\n                'name': 'block_menteesplus_collapsed',\n                'value': value,\n                'userid': userid\n            }];\n            var request = {\n                methodname: 'core_user_set_user_preferences',\n                args: {\n                    preferences: preferences\n                }\n            };\n            Ajax.call([request])[0].then(function(data) {\n                if (data.saved) {\n                    // alert('saved '+userid+' '+value);\n                }\n                return;\n            }).catch(Notification.exception);\n\n        });\n    }\n\n    return {\n        init: function(clickNode, toggleNode, userid, keepExpanded) {\n\n            // Search node to be collapsible.\n            var click = $('.' + clickNode);\n\n            // Search node to be collapsible.\n            var toggle = $('.' + toggleNode);\n\n            // Add a click handler to this node.\n            toggleClickHandler(click, toggle, userid);\n\n            // Set initial state to collapsed.\n            if (!keepExpanded) {\n                toggle.attr(\"data-collapse\", \"1\");\n            }\n        }\n    };\n});"],"file":"menteesplus.min.js"}