{"version":3,"sources":["../src/menteesplus.js"],"names":["define","$","Ajax","init","userid","console","log","region","attr","find","addClass","btnmenteestoggle","click","e","preventDefault","html","prop","value","call","methodname","args","preferences","done","response","btnblocktoggle","removeClass"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package    block_menteesplus\n * @copyright  2019 Michael de Raadt michaelderaadt@gmai.com\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'core/ajax'], function ($, Ajax) {\n    \"use strict\";\n\n    /**\n     * Initializes the block controls.\n     */\n    function init(userid, menteestoggle, blocktoggle, title) {\n        console.log('block_menteesplus: initializing controls');\n\n        var region = $('.menteesplus');\n\n        // Init block title\n        if (region.attr('data-blocktoggle') == 0) {\n            $('section.block_menteesplus').find('.card-title').addClass('show-title');\n        }\n\n        // Handle the block toggle event.\n        var btnmenteestoggle = $('.menteestoggle');\n        btnmenteestoggle.click(function (e) {\n            // Prevent that the browser opens the node's default action link (if existing).\n            e.preventDefault();\n\n            // Toggle expanded/collapsed.\n            if (region.attr('data-menteestoggle') == 1) {\n                region.attr(\"data-menteestoggle\", \"0\");\n                btnmenteestoggle.html(\"&#xf0da;\");\n                $('.menteestoggle').prop('title', 'Expand');\n            } else if (region.attr('data-menteestoggle') == 0) {\n                region.attr(\"data-menteestoggle\", \"1\");\n                btnmenteestoggle.html(\"&#xf0d7;\");\n                $('.menteestoggle').prop('title', 'Collapse');\n            }\n\n            // Save toggle state as a preference.\n            var value = region.attr('data-menteestoggle') == '1' ? 1 : 0;\n            var preferences = [{\n                'name': 'block_menteesplus_menteestoggle',\n                'value': value,\n                'userid': userid\n            }];\n            Ajax.call([{\n                methodname: 'core_user_set_user_preferences',\n                args: {preferences: preferences},\n                done: function (response) {\n                    console.log(response);\n                }\n            }]);\n        });\n\n        // Handle the toggle mentees event.\n        var btnblocktoggle = $('.blocktoggle');\n        btnblocktoggle.click(function (e) {\n            // Prevent that the browser opens the node's default action link (if existing).\n            e.preventDefault();\n\n            // Toggle show/hide mentees.\n            if (region.attr('data-blocktoggle') == 0) { // Closed\n                region.attr(\"data-blocktoggle\", \"1\");\n                btnblocktoggle.html(\"&#xf06e;\");\n               \n                $(\".blocktoggle\").prop('title', 'Hide');\n                $('section.block_menteesplus').find(\".card-title\").removeClass('show-title');\n            } else if (region.attr('data-blocktoggle') == 1) { // Opened.\n                region.attr(\"data-blocktoggle\", \"0\");\n                $('section.block_menteesplus').find(\".card-title\").addClass('show-title');\n                btnblocktoggle.html(\"&#xf070;\");\n                $(\".blocktoggle\").prop('title', 'Show');\n            }\n\n            // Save toggle state as a preference.\n            var value = region.attr('data-blocktoggle') == '1' ? 1 : 0;\n\n            var preferences = [{\n                'name': 'block_menteesplus_blocktoggle',\n                'value': value,\n                'userid': userid\n            }];\n\n            Ajax.call([{\n                methodname: 'core_user_set_user_preferences',\n                args: {preferences: preferences},\n                done: function (response) {\n                    console.log(response);\n                }\n            }]);\n        });\n    }\n\n    return {\n        init: init\n    };\n\n});"],"file":"menteesplus.min.js"}